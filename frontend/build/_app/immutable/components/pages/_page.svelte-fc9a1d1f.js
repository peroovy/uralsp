import{S as Le,i as Re,s as Fe,k as a,a as r,q as he,D as Qe,l,m as n,h as s,c,r as ue,n as t,E as Ie,B as e,b as ke,A as xe,o as Ue,J as Ye,K as be}from"../../chunks/index-af757d0f.js";import{s as Ze}from"../../chunks/logo-ed4c505e.js";import{d as Xe}from"../../chunks/dots-63d78b83.js";import{w as $e,b as Je}from"../../chunks/paths-9678c1af.js";import{p as W}from"../../chunks/parse-20d1a128.js";const et="",Ne=$e(et);const{document:G}=Ye;function tt(j){let S,p,V,P,I,ge,d,L,h,u,w,pe,le,z,oe,y,o,x,T,m,k,b,i,g,f,H,v,A,N,K,R,ne,J,we,q,F,ye,D,ie,Ee,Q,Se,je,re,Ve,B,U,De,C,ce,Ce,Y,Te,Ae,de,me,O,M,Z,Pe;return{c(){S=a("link"),p=a("link"),V=a("meta"),P=a("meta"),I=a("script"),d=a("script"),h=r(),u=a("section"),w=a("img"),le=r(),z=a("div"),oe=r(),y=a("div"),o=a("img"),T=r(),m=a("p"),k=he("Please sign up to continue"),b=r(),i=a("div"),g=a("div"),f=a("div"),H=r(),v=a("div"),A=a("i"),N=r(),K=a("span"),R=he("Continue with Google"),ne=r(),J=a("i"),we=r(),q=a("div"),F=a("div"),ye=r(),D=a("div"),ie=a("i"),Ee=r(),Q=a("span"),Se=he("Continue with VK"),je=r(),re=a("i"),Ve=r(),B=a("div"),U=a("div"),De=r(),C=a("div"),ce=a("i"),Ce=r(),Y=a("span"),Te=he("Continue with Telegram"),Ae=r(),de=a("i"),me=r(),O=a("div"),M=a("div"),Z=a("span"),Pe=he("Loading..."),this.h()},l(_){const E=Qe('[data-svelte="svelte-21iq1o"]',G.head);S=l(E,"LINK",{rel:!0,href:!0,integrity:!0,crossorigin:!0}),p=l(E,"LINK",{rel:!0,href:!0}),V=l(E,"META",{name:!0,content:!0}),P=l(E,"META",{name:!0,content:!0}),I=l(E,"SCRIPT",{src:!0,integrity:!0,crossorigin:!0});var Me=n(I);Me.forEach(s),d=l(E,"SCRIPT",{src:!0,type:!0,charset:!0});var We=n(d);We.forEach(s),E.forEach(s),h=c(_),u=l(_,"SECTION",{class:!0});var X=n(u);w=l(X,"IMG",{class:!0,src:!0,alt:!0}),le=c(X),z=l(X,"DIV",{class:!0}),n(z).forEach(s),oe=c(X),y=l(X,"DIV",{class:!0});var $=n(y);o=l($,"IMG",{src:!0,alt:!0,class:!0}),T=c($),m=l($,"P",{class:!0});var Ke=n(m);k=ue(Ke,"Please sign up to continue"),Ke.forEach(s),b=c($),i=l($,"DIV",{class:!0});var ee=n(i);g=l(ee,"DIV",{class:!0});var ve=n(g);f=l(ve,"DIV",{class:!0}),n(f).forEach(s),H=c(ve),v=l(ve,"DIV",{class:!0});var te=n(v);A=l(te,"I",{class:!0}),n(A).forEach(s),N=c(te),K=l(te,"SPAN",{class:!0});var qe=n(K);R=ue(qe,"Continue with Google"),qe.forEach(s),ne=c(te),J=l(te,"I",{class:!0}),n(J).forEach(s),te.forEach(s),ve.forEach(s),we=c(ee),q=l(ee,"DIV",{class:!0});var fe=n(q);F=l(fe,"DIV",{id:!0,class:!0}),n(F).forEach(s),ye=c(fe),D=l(fe,"DIV",{class:!0});var se=n(D);ie=l(se,"I",{class:!0}),n(ie).forEach(s),Ee=c(se),Q=l(se,"SPAN",{class:!0});var Be=n(Q);Se=ue(Be,"Continue with VK"),Be.forEach(s),je=c(se),re=l(se,"I",{class:!0}),n(re).forEach(s),se.forEach(s),fe.forEach(s),Ve=c(ee),B=l(ee,"DIV",{class:!0});var _e=n(B);U=l(_e,"DIV",{class:!0}),n(U).forEach(s),De=c(_e),C=l(_e,"DIV",{class:!0});var ae=n(C);ce=l(ae,"I",{class:!0}),n(ce).forEach(s),Ce=c(ae),Y=l(ae,"SPAN",{class:!0});var Oe=n(Y);Te=ue(Oe,"Continue with Telegram"),Oe.forEach(s),Ae=c(ae),de=l(ae,"I",{class:!0}),n(de).forEach(s),ae.forEach(s),_e.forEach(s),ee.forEach(s),$.forEach(s),X.forEach(s),me=c(_),O=l(_,"DIV",{class:!0});var Ge=n(O);M=l(Ge,"DIV",{class:!0,role:!0});var ze=n(M);Z=l(ze,"SPAN",{class:!0});var He=n(Z);Pe=ue(He,"Loading..."),He.forEach(s),ze.forEach(s),Ge.forEach(s),this.h()},h(){t(S,"rel","stylesheet"),t(S,"href","https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"),t(S,"integrity","sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"),t(S,"crossorigin","anonymous"),t(p,"rel","stylesheet"),t(p,"href","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"),t(V,"name","viewport"),t(V,"content","width=device-width, initial-scale=1, shrink-to-fit=no"),t(P,"name","description"),t(P,"content","Some description!"),G.title="App Name | Signup",I.async=!0,I.defer=!0,Ie(I.src,ge="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js")||t(I,"src",ge),t(I,"integrity","sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"),t(I,"crossorigin","anonymous"),d.async=!0,d.defer=!0,Ie(d.src,L="https://vk.com/js/api/openapi.js")||t(d,"src",L),t(d,"type","text/javascript"),t(d,"charset","windows-1251"),t(w,"class","d1 svelte-dg45h2"),Ie(w.src,pe=Xe)||t(w,"src",pe),t(w,"alt",""),t(z,"class","d2 svelte-dg45h2"),Ie(o.src,x=Ze)||t(o,"src",x),t(o,"alt","logo"),t(o,"class","logo svelte-dg45h2"),t(m,"class","svelte-dg45h2"),t(f,"class","googleBtnHolder svelte-dg45h2"),t(A,"class","fa fa-google svelte-dg45h2"),t(K,"class","svelte-dg45h2"),t(J,"class","fa fa-arrow-right svelte-dg45h2"),t(v,"class","btn btn-lg btn-block btn-outline svelte-dg45h2"),t(g,"class","google svelte-dg45h2"),t(F,"id","vk_auth"),t(F,"class","vkHolder svelte-dg45h2"),t(ie,"class","fa fa-vk svelte-dg45h2"),t(Q,"class","svelte-dg45h2"),t(re,"class","fa fa-arrow-right svelte-dg45h2"),t(D,"class","btn btn-lg btn-block btn-outline svelte-dg45h2"),t(q,"class","vk svelte-dg45h2"),t(U,"class","telegramBtnHolder svelte-dg45h2"),t(ce,"class","fa fa-telegram svelte-dg45h2"),t(Y,"class","svelte-dg45h2"),t(de,"class","fa fa-arrow-right svelte-dg45h2"),t(C,"class","btn btn-lg btn-block btn-outline svelte-dg45h2"),t(B,"class","tele svelte-dg45h2"),t(i,"class","btn-group-vertical col-12"),t(y,"class","signup-form svelte-dg45h2"),t(u,"class","signup svelte-dg45h2"),t(Z,"class","visually-hidden"),t(M,"class","spinner-border svelte-dg45h2"),t(M,"role","status"),t(O,"class","loading svelte-dg45h2")},m(_,E){e(G.head,S),e(G.head,p),e(G.head,V),e(G.head,P),e(G.head,I),e(G.head,d),ke(_,h,E),ke(_,u,E),e(u,w),e(u,le),e(u,z),e(u,oe),e(u,y),e(y,o),e(y,T),e(y,m),e(m,k),e(y,b),e(y,i),e(i,g),e(g,f),j[4](f),e(g,H),e(g,v),e(v,A),e(v,N),e(v,K),e(K,R),e(v,ne),e(v,J),j[5](v),e(i,we),e(i,q),e(q,F),e(q,ye),e(q,D),e(D,ie),e(D,Ee),e(D,Q),e(Q,Se),e(D,je),e(D,re),e(i,Ve),e(i,B),e(B,U),j[6](U),e(B,De),e(B,C),e(C,ce),e(C,Ce),e(C,Y),e(Y,Te),e(C,Ae),e(C,de),ke(_,me,E),ke(_,O,E),e(O,M),e(M,Z),e(Z,Pe),j[7](O)},p:xe,i:xe,o:xe,d(_){s(S),s(p),s(V),s(P),s(I),s(d),_&&s(h),_&&s(u),j[4](null),j[5](null),j[6](null),_&&s(me),_&&s(O),j[7](null)}}}function st(j,S,p){const V="http://localhost:8000",P="868612228164-4rrjlhpktkg005qd25qp0f5sa55fuu5j.apps.googleusercontent.com",I="51395235",ge="zeyaddevbot";let d,L,h,u;function w(o,x){o==="super_admin"||o==="admin"?window.location.href=`${Je}/admin/${x}`:window.location.href=`${Je}/participant/ongoing`}Ue(()=>{{let o=localStorage.getItem("access_token"),x=localStorage.getItem("expires_in");if(o!=null&&x!=null){let k=new Date(parseInt(localStorage.getItem("expires_in"))*1e3);if(new Date<k){Ne.set(o);let i=W(localStorage.getItem("access_token")),g=i.permission,f=i.user_id;w(g,f)}else localStorage.removeItem("access_token"),localStorage.removeItem("expires_in")}async function T(k){let i={id_token:k.credential};p(2,h.style.display="block",h),await fetch(`${V}/auth/signin-google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(g=>{g.json().then(f=>{let H=f.expires_in,v=f.access_token;f.cookie,localStorage.setItem("access_token",v),localStorage.setItem("expires_in",H);let A=W(localStorage.getItem("access_token")).permission,N=W(localStorage.getItem("access_token")).user_id;w(A,N)})})}window.telegramCallback=pe;let m=document.createElement("script");m.src="https://telegram.org/js/telegram-widget.js?19",m.setAttribute("async","true"),m.setAttribute("data-telegram-login",ge),m.setAttribute("data-onauth","window.telegramCallback(user)"),u.appendChild(m),setTimeout(()=>{window.google&&(window.google.accounts.id.initialize({client_id:P,allowed_parent_origin:"https://reg.uralsp.ru/",callback:T}),window.google.accounts.id.renderButton(d,{size:"large",theme:"outline",text:"continue_with_google"}));let k=window.VK||{};k&&(k.init({apiId:I}),k.Widgets.Auth("vk_auth",{async onAuth(b){let i=b.uid,g=b.hash,f=b.first_name,H=b.last_name,v={uid:i,first_name:f,last_name:H,hash:g};p(2,h.style.display="block",h),await fetch(`${V}/auth/signin-vkontakte`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}).then(A=>{A.json().then(N=>{let K=N.expires_in,R=N.access_token;localStorage.setItem("access_token",R),localStorage.setItem("expires_in",K),Ne.set(R);let ne=W(localStorage.getItem("access_token")).permission,J=W(localStorage.getItem("access_token")).user_id;w(ne,J)})})}}))},1e3)}p(2,h.style.display="none",h)});function pe(o){let x={id:o.id,first_name:o.first_name,last_name:o.last_name,username:o.username,photo_url:o.photo_url,auth_date:o.auth_date,hash:o.hash};p(2,h.style.display="block",h),fetch(`${V}/auth/signin-telegram`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}).then(T=>{T.json().then(m=>{let k=m.expires_in,b=m.access_token;localStorage.setItem("access_token",b),localStorage.setItem("expires_in",k),Ne.set(b);let i=W(localStorage.getItem("access_token")).permission,g=W(localStorage.getItem("access_token")).user_id;w(i,g)})}).catch(T=>{console.error(T)})}function le(o){be[o?"unshift":"push"](()=>{d=o,p(0,d)})}function z(o){be[o?"unshift":"push"](()=>{L=o,p(1,L)})}function oe(o){be[o?"unshift":"push"](()=>{u=o,p(3,u)})}function y(o){be[o?"unshift":"push"](()=>{h=o,p(2,h)})}return[d,L,h,u,le,z,oe,y]}class rt extends Le{constructor(S){super(),Re(this,S,st,tt,Fe,{})}}export{rt as default};
